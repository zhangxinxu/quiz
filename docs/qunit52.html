<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="author" content="zhangxinxu">
<title>JS小测52单元测试</title>
<link rel="stylesheet" href="https://www.zhangxinxu.com/github/quickLayout/quick-layout-min.css">
<style>
h1 {
	background-color: #333;
	color: #fff;
}
input {
	width: 50%;
	box-sizing: border-box;
	font-family: monaco, console, monospace;
    padding: 5px 10px;
}
textarea {
	width: 100%;
	height: 280px;
	font-family: monaco, console, monospace;
	box-sizing: border-box;
	resize: vertical;
}
x-success {
	display: block;
	background-color: green;
	color: #fff;
	padding: 10px;
	margin: 5px 0 0 0;
	white-space: pre-wrap;
}
x-error {
	display: block;
	background-color: #EE5757;
	color: #fff;
	padding: 10px;
	margin: 5px 0 0 0;
	white-space: pre-wrap;
}
.result:empty::before {
	display: block;
	margin: 5px 0 0 0;
	content: '测试尚未开始';
	color: gray;
	text-align: center;
	line-height: 100px;
	background-color: #eee;
	font-family: monaco, console, monospace;
}
</style>
</head>
<body>
<h1>JS小测52单元测试</h1>
<pre>请写一个名为 getSameItems 方法，参数个数不限，请返回一个新数组，新数组内容为所有数组类型参数的相同值。例如：
    getSameItems([1,2,3]) // 返回 [1,2,3]
    getSameItems([1,2,3], [2,3,4]) // 返回 [2,3]
    getSameItems([1,2,3], [2,3,4], [3,4,5]) // 返回 [3]
    getSameItems([1,2], [3,4,5]) // 返回 []</pre>
<div class="fix">
	<div class="float-two">
		<h3>测试入口：</h3>
		<p class="gray">// <output class="methodName"></output>代码粘贴在这里，getSameItems函数前面不需要的const或let</p>
		<textarea name="" id="codeArea" cols="30" rows="8"></textarea>
        <p><a href="javascript:" id="button" class="btn btn-blue">开始测试</a></p>
	</div>
	<div class="float-two">
		<div class="pl15">
			<h3>测试结果</h3>
			<div id="result1" class="result"></div>
		</div>
	</div>
</div>

<script>

arr2str = function (arr) {
    return JSON.stringify({
        a: arr
    }).split(':[')[1].split(']}')[0];
};
arr2str2 = function (arr) {
    return JSON.stringify({
        a: arr
    }).split(':')[1].split('}')[0];
};

button.onclick = function () {
	if (codeArea.value) {
		window.eval(codeArea.value);

		let arrInOut = [{
            input: [],
            output: []
        }, {
            input: [[1]],
            output: [1]
        }, {
            input: [[1], [2]],
            output: []
        }, {
            input: [[1], 1, 2],
            output: [1]
        }, {
            input: [[1], [1, 2]],
            output: [1]
        }, {
            input: [[0], ['0', 1], null, false, '0', 0],
            output: []
        }, {
            input: [[1, 2], ['1', 2, 3]],
            output: [2]
        }, {
            input: [[1, 2, 3], ['1', 2, 3]],
            output: [2, 3]
        }, {
            input: [[1, 2, 3], [2, 3], [3, 4, 5]],
            output: [3]
        }, {
            input: [[1, 3], [2, 3], [4, 5]],
            output: []
        }];

		// 开始比较
		var html1 = '';

        arrInOut.forEach(function (obj) {
            var expectResult = obj.output;
            var trueResult = getSameItems.apply(null, obj.input);

            var text1 = `成功运行getSameItems(${arr2str(obj.input)})方法，预期结果是${arr2str2(expectResult)}，实际结果是${arr2str2(trueResult)}，两者`;
            if (expectResult.length === trueResult.length && expectResult.join() == trueResult.join()) {
                text1 += '相等，测试通过。';
                html1 += `<x-success>${text1}</x-success>`;
            } else {
                text1 += '不相等，测试不通过。';
                html1 += `<x-error>${text1}</x-error>`;
            }    
        });

		result1.innerHTML = html1;
	}
};

</script>
</body>
</html>